name: Push-to-EC2

# Trigger deployment only on push to master branch
on:
 workflow_call: 

jobs:
  deploy:
    name: Deploy to EC2 on master branch push
    runs-on: ubuntu-latest

    steps:
      - name: Checkout the files
        uses: actions/checkout@v2

      - name: Download a Build Artifact
        uses: actions/download-artifact@v2.1.1
        with:
         name: Package

    #   - name: Deploy to Server
    #     uses: easingthemes/ssh-deploy@main
    #     env:
    #       SSH_PRIVATE_KEY: ${{ secrets.EC2_SSH_KEY }} # EC2_SSH_KEY: This will be your .pem file which you will use to login to the instance
    #       REMOTE_HOST: ${{ secrets.HOST_DNS }} #HOST_DNS: Public DNS record of the instance, it will look something like this ec2-xx-xxx-xxx-xxx.us-west-2.compute.amazonaws.com
    #       REMOTE_USER: ${{ secrets.USERNAME }} # USERNAME: Will be the username of the EC2 instance, usually ubuntu
    #       TARGET: /home/${{ secrets.REMOTE_USER }} # TARGET_DIR: Is where you want to deploy your code.
    
    #   - name: Executing remote ssh commands using ssh key
    #     uses: appleboy/ssh-action@master
    #     with:
    #         host: ${{ secrets.HOST_DNS }}
    #         username: ${{ secrets.USERNAME }}
    #         key: ${{ secrets.EC2_SSH_KEY }}
    #         script: |
           
